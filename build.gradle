apply plugin: 'java'
apply plugin: 'eclipse'

repositories {
    mavenCentral()
    maven {
        name = "bukkit"
        url = "http://repo.bukkit.org/content/groups/public"
    }
    maven {
        name = "spigot"
        url = "http://repo.md-5.net/content/groups/public"
    }
}
group = 'iReport'
version = '2.0'
archivesBaseName = 'iReport'
targetCompatibility = '1.6'
sourceCompatibility = '1.6'

dependencies {
    compile 'org.bukkit:bukkit:1.7.10-R0.1-SNAPSHOT'
}

processResources
{
	// this will ensure that this task is redone when the versions change.
	inputs.property "version", project.version

	// replace stuff in mcmod.info, nothing else
	from(sourceSets.main.resources.srcDirs) {
		include 'plugin.yml'

		filter{line ->
		    line.replaceAll("version:", "version: " + project.version)
        }
	}

	// copy everything else, thats not the mcmod.info
	from(sourceSets.main.resources.srcDirs) {
		exclude 'plugin.yml'
	}
}